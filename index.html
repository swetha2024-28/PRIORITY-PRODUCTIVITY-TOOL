<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Task Prioritizer</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #e0f2fe 0%, #c5cae9 100%);
            min-height: 100vh;
            padding: 24px;
        }
        
        .container {
            max-width: 1024px;
            margin: 0 auto;
        }
        
        .title {
            font-size: 2.5rem;
            font-weight: bold;
            color: #1f2937;
            margin-bottom: 32px;
            text-align: center;
        }
        
        .card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            padding: 24px;
            margin-bottom: 24px;
        }
        
        .card-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
        }
        
        .icon {
            margin-right: 8px;
            font-size: 1.2em;
        }
        
        .input-group {
            display: flex;
            gap: 16px;
            align-items: center;
        }
        
        input, select, textarea {
            padding: 8px 12px;
            border: 2px solid #d1d5db;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.2s;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #4f46e5;
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
        }
        
        .input-full {
            width: 100%;
        }
        
        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
        }
        
        .btn-primary {
            background: #4f46e5;
            color: white;
        }
        
        .btn-primary:hover {
            background: #4338ca;
        }
        
        .btn-success {
            background: #10b981;
            color: white;
        }
        
        .btn-success:hover {
            background: #059669;
        }
        
        .btn-secondary {
            background: #d1d5db;
            color: #374151;
        }
        
        .btn-secondary:hover {
            background: #9ca3af;
        }
        
        .btn-small {
            padding: 4px 12px;
            font-size: 12px;
        }
        
        .btn-link {
            background: none;
            border: none;
            color: #6b7280;
            text-decoration: underline;
            cursor: pointer;
        }
        
        .grid {
            display: grid;
            gap: 16px;
        }
        
        .grid-2 {
            grid-template-columns: 1fr 1fr;
        }
        
        .col-span-2 {
            grid-column: span 2;
        }
        
        .flex {
            display: flex;
        }
        
        .justify-between {
            justify-content: space-between;
        }
        
        .items-center {
            align-items: center;
        }
        
        .items-start {
            align-items: flex-start;
        }
        
        .gap-2 {
            gap: 8px;
        }
        
        .gap-4 {
            gap: 16px;
        }
        
        .mb-2 {
            margin-bottom: 8px;
        }
        
        .mb-4 {
            margin-bottom: 16px;
        }
        
        .mt-2 {
            margin-top: 8px;
        }
        
        .mt-3 {
            margin-top: 12px;
        }
        
        .ml-4 {
            margin-left: 16px;
        }
        
        .text-right {
            text-align: right;
        }
        
        .text-center {
            text-align: center;
        }
        
        .text-sm {
            font-size: 14px;
        }
        
        .text-xs {
            font-size: 12px;
        }
        
        .text-lg {
            font-size: 18px;
        }
        
        .text-xl {
            font-size: 20px;
        }
        
        .text-2xl {
            font-size: 24px;
        }
        
        .font-semibold {
            font-weight: 600;
        }
        
        .font-bold {
            font-weight: bold;
        }
        
        .text-gray-500 {
            color: #6b7280;
        }
        
        .text-gray-600 {
            color: #4b5563;
        }
        
        .text-gray-700 {
            color: #374151;
        }
        
        .text-gray-800 {
            color: #1f2937;
        }
        
        .text-green-700 {
            color: #15803d;
        }
        
        .text-indigo-600 {
            color: #4f46e5;
        }
        
        .text-red-600 {
            color: #dc2626;
        }
        
        .text-green-500 {
            color: #10b981;
        }
        
        .opacity-60 {
            opacity: 0.6;
        }
        
        .line-through {
            text-decoration: line-through;
        }
        
        .suggestion-card {
            border: 2px solid #bbf7d0;
            border-radius: 8px;
            padding: 16px;
            background: #f0fdf4;
            margin-bottom: 12px;
        }
        
        .task-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            padding: 24px;
            margin-bottom: 16px;
        }
        
        .tag {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 500;
        }
        
        .tag-must {
            background: #fee2e2;
            color: #991b1b;
        }
        
        .tag-want {
            background: #dbeafe;
            color: #1e40af;
        }
        
        .tag-atomic {
            background: #f3e8ff;
            color: #7c2d12;
        }
        
        .tag-breakable {
            background: #fed7aa;
            color: #c2410c;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e5e7eb;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: #4f46e5;
            transition: width 0.3s;
        }
        
        .user-header {
            background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 24px;
        }
        
        .user-switcher {
            background: white;
            border-radius: 8px;
            padding: 16px;
            margin-top: 16px;
        }
        
        .user-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 16px;
        }
        
        .user-chip {
            padding: 6px 12px;
            background: #f3f4f6;
            border: 2px solid #d1d5db;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
        }
        
        .user-chip:hover {
            background: #e5e7eb;
        }
        
        .user-chip.active {
            background: #4f46e5;
            color: white;
            border-color: #4f46e5;
        }
        
        .delete-user {
            background: #ef4444;
            color: white;
            border: none;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            font-size: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .delete-user:hover {
            background: #dc2626;
        }
        
        .welcome-screen {
            text-align: center;
            padding: 60px 20px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        
        .welcome-icon {
            font-size: 5rem;
            margin-bottom: 24px;
        }
        
        .user-form {
            display: flex;
            gap: 8px;
            align-items: center;
        }
        
        .empty-state {
            text-align: center;
            padding: 48px 0;
        }
        
        .empty-icon {
            font-size: 4rem;
            opacity: 0.3;
            margin-bottom: 16px;
        }
        
        .flex-wrap {
            flex-wrap: wrap;
        }
        
        .flex-1 {
            flex: 1;
        }
        
        .space-y-3 > * + * {
            margin-top: 12px;
        }
        
        .space-y-4 > * + * {
            margin-top: 16px;
        }
        
        label {
            display: block;
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 4px;
            color: #374151;
        }
        
        @media (max-width: 768px) {
            .grid-2 {
                grid-template-columns: 1fr;
            }
            .col-span-2 {
                grid-column: span 1;
            }
            .title {
                font-size: 2rem;
            }
            body {
                padding: 16px;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script>
        const { useState, useEffect, createElement: e } = React;

        const SmartTaskPrioritizer = () => {
          // User profile state
          const [currentUser, setCurrentUser] = useState(() => {
            try {
              return localStorage.getItem('smartTaskPrioritizer-currentUser') || null;
            } catch (error) {
              return null;
            }
          });
          
          const [users, setUsers] = useState(() => {
            try {
              const savedUsers = localStorage.getItem('smartTaskPrioritizer-users');
              return savedUsers ? JSON.parse(savedUsers) : {};
            } catch (error) {
              return {};
            }
          });
          
          const [showUserForm, setShowUserForm] = useState(false);
          const [newUserName, setNewUserName] = useState('');
          
          // Load tasks for current user
          const [tasks, setTasks] = useState(() => {
            if (!currentUser) return [];
            try {
              const userData = users[currentUser];
              return userData ? userData.tasks : [];
            } catch (error) {
              return [];
            }
          });
          
          const [showAddTask, setShowAddTask] = useState(false);
          const [availableTime, setAvailableTime] = useState('');
          const [suggestions, setSuggestions] = useState([]);
          
          const [newTask, setNewTask] = useState({
            name: '',
            description: '',
            timeRequired: '',
            difficulty: 1,
            deadline: '',
            priorityType: 'want',
            taskType: 'atomic',
            minChunkSize: 15,
            completed: false,
            timeSpent: 0
          });

          // Save user data to localStorage
          const saveUserData = () => {
            if (!currentUser) return;
            try {
              const updatedUsers = {
                ...users,
                [currentUser]: {
                  name: currentUser,
                  tasks: tasks,
                  lastActive: new Date().toISOString()
                }
              };
              setUsers(updatedUsers);
              localStorage.setItem('smartTaskPrioritizer-users', JSON.stringify(updatedUsers));
              localStorage.setItem('smartTaskPrioritizer-currentUser', currentUser);
            } catch (error) {
              console.error('Error saving user data:', error);
            }
          };

          // Save tasks to localStorage whenever tasks change
          useEffect(() => {
            if (currentUser && tasks.length >= 0) {
              saveUserData();
            }
          }, [tasks, currentUser]);

          // User management functions
          const createUser = () => {
            if (newUserName.trim() && !users[newUserName.trim()]) {
              const userName = newUserName.trim();
              const newUsers = {
                ...users,
                [userName]: {
                  name: userName,
                  tasks: [],
                  createdAt: new Date().toISOString(),
                  lastActive: new Date().toISOString()
                }
              };
              setUsers(newUsers);
              setCurrentUser(userName);
              setTasks([]);
              setNewUserName('');
              setShowUserForm(false);
              localStorage.setItem('smartTaskPrioritizer-users', JSON.stringify(newUsers));
              localStorage.setItem('smartTaskPrioritizer-currentUser', userName);
            }
          };

          const switchUser = (userName) => {
            setCurrentUser(userName);
            const userData = users[userName];
            setTasks(userData ? userData.tasks : []);
            localStorage.setItem('smartTaskPrioritizer-currentUser', userName);
          };

          const deleteUser = (userName) => {
            if (confirm(`Are you sure you want to delete ${userName}'s profile and all their tasks?`)) {
              const newUsers = { ...users };
              delete newUsers[userName];
              setUsers(newUsers);
              localStorage.setItem('smartTaskPrioritizer-users', JSON.stringify(newUsers));
              
              if (currentUser === userName) {
                const remainingUsers = Object.keys(newUsers);
                if (remainingUsers.length > 0) {
                  switchUser(remainingUsers[0]);
                } else {
                  setCurrentUser(null);
                  setTasks([]);
                  localStorage.removeItem('smartTaskPrioritizer-currentUser');
                }
              }
            }
          };

          // Save tasks to localStorage whenever tasks change
          useEffect(() => {
            if (currentUser) {
              saveUserData();
            }
          }, [tasks]);

          // Calculate task score
          const calculateScore = (task) => {
            const now = new Date();
            const deadline = new Date(task.deadline);
            const daysUntilDeadline = Math.max(0, (deadline - now) / (1000 * 60 * 60 * 24));
            
            // Base scores
            let score = 0;
            
            // Urgency score (higher for closer deadlines)
            const urgencyScore = Math.max(0, 100 - daysUntilDeadline * 10);
            score += urgencyScore;
            
            // Priority type bonus
            score += task.priorityType === 'must' ? 50 : 0;
            
            // Difficulty consideration (easier tasks get slight bonus for quick wins)
            score += (6 - task.difficulty) * 5;
            
            // Progress bonus for breakable tasks
            if (task.taskType === 'breakable' && task.timeSpent > 0) {
              const progressRatio = task.timeSpent / task.timeRequired;
              score += progressRatio * 30; // Bonus for continuing work
            }
            
            return Math.round(score);
          };

          // Get task suggestions based on available time
          const getTaskSuggestions = (minutes) => {
            const availableMinutes = parseInt(minutes);
            if (!availableMinutes) return [];
            
            const incompleteTasks = tasks.filter(task => !task.completed);
            
            const suitableTasks = incompleteTasks.filter(task => {
              if (task.taskType === 'atomic') {
                // Atomic tasks need full time
                return task.timeRequired <= availableMinutes;
              } else {
                // Breakable tasks need at least minimum chunk size
                const remainingTime = task.timeRequired - task.timeSpent;
                return remainingTime > 0 && task.minChunkSize <= availableMinutes;
              }
            });
            
            // Sort by calculated score (highest first)
            return suitableTasks
              .map(task => ({ ...task, score: calculateScore(task) }))
              .sort((a, b) => b.score - a.score)
              .slice(0, 3); // Top 3 suggestions
          };

          const addTask = () => {
            if (newTask.name && newTask.timeRequired && newTask.deadline) {
              setTasks([...tasks, { 
                ...newTask, 
                id: Date.now(),
                timeRequired: parseInt(newTask.timeRequired),
                minChunkSize: parseInt(newTask.minChunkSize)
              }]);
              setNewTask({
                name: '',
                description: '',
                timeRequired: '',
                difficulty: 1,
                deadline: '',
                priorityType: 'want',
                taskType: 'atomic',
                minChunkSize: 15,
                completed: false,
                timeSpent: 0
              });
              setShowAddTask(false);
            }
          };

          const markTaskComplete = (taskId) => {
            setTasks(tasks.map(task => 
              task.id === taskId ? { ...task, completed: true } : task
            ));
          };

          const workOnTask = (taskId, minutesWorked) => {
            setTasks(tasks.map(task => {
              if (task.id === taskId) {
                const newTimeSpent = task.timeSpent + minutesWorked;
                return { 
                  ...task, 
                  timeSpent: newTimeSpent,
                  completed: newTimeSpent >= task.timeRequired
                };
              }
              return task;
            }));
          };

          useEffect(() => {
            if (availableTime) {
              setSuggestions(getTaskSuggestions(availableTime));
            } else {
              setSuggestions([]);
            }
          }, [availableTime, tasks]);

          const formatDeadline = (deadline) => {
            const date = new Date(deadline);
            const now = new Date();
            const diffDays = Math.ceil((date - now) / (1000 * 60 * 60 * 24));
            
            if (diffDays < 0) return 'âš ï¸ Overdue';
            if (diffDays === 0) return 'ðŸ”¥ Due today';
            if (diffDays === 1) return 'âš¡ Due tomorrow';
            return `ðŸ“… ${diffDays} days left`;
          };

          // If no user is selected, show welcome screen
          if (!currentUser) {
            return e('div', { className: "container" },
              e('div', { className: "welcome-screen" },
                e('div', { className: "welcome-icon" }, "ðŸ‘‹"),
                e('h1', { className: "title" }, "Welcome to Smart Task Prioritizer"),
                e('p', { className: "text-lg text-gray-600 mb-8" }, "Create your profile to get started with intelligent task management"),
                
                // User creation form
                e('div', { className: "user-form", style: { justifyContent: 'center', marginBottom: '24px' } },
                  e('input', {
                    type: "text",
                    placeholder: "Enter your name",
                    value: newUserName,
                    onChange: (event) => setNewUserName(event.target.value),
                    onKeyPress: (event) => event.key === 'Enter' && createUser(),
                    style: { width: '250px' }
                  }),
                  e('button', {
                    onClick: createUser,
                    className: "btn btn-primary",
                    disabled: !newUserName.trim()
                  }, "Create Profile")
                ),
                
                // Existing users
                Object.keys(users).length > 0 && e('div', {},
                  e('p', { className: "text-gray-600 mb-4" }, "Or choose an existing profile:"),
                  e('div', { className: "user-list", style: { justifyContent: 'center' } },
                    Object.keys(users).map(userName => 
                      e('button', {
                        key: userName,
                        onClick: () => switchUser(userName),
                        className: "user-chip"
                      },
                        e('span', {}, userName),
                        e('button', {
                          onClick: (event) => {
                            event.stopPropagation();
                            deleteUser(userName);
                          },
                          className: "delete-user"
                        }, "Ã—")
                      )
                    )
                  )
                )
              )
            );
          }

          return e('div', { className: "container" },
            // User Header
            e('div', { className: "user-header" },
              e('div', { className: "flex justify-between items-center" },
                e('div', {},
                  e('h1', { className: "text-2xl font-bold" }, `Welcome back, ${currentUser}! ðŸ‘‹`),
                  e('p', { className: "opacity-90" }, `You have ${tasks.filter(t => !t.completed).length} active tasks`)
                ),
                e('button', {
                  onClick: () => setShowUserForm(!showUserForm),
                  className: "btn btn-secondary",
                  style: { background: 'rgba(255,255,255,0.2)', color: 'white', border: 'none' }
                }, "Switch Profile")
              ),
              
              // User Switcher
              showUserForm && e('div', { className: "user-switcher" },
                e('h3', { className: "font-semibold mb-3 text-gray-800" }, "Switch Profile"),
                e('div', { className: "user-list" },
                  Object.keys(users).map(userName => 
                    e('button', {
                      key: userName,
                      onClick: () => {
                        switchUser(userName);
                        setShowUserForm(false);
                      },
                      className: `user-chip ${userName === currentUser ? 'active' : ''}`
                    },
                      e('span', {}, userName),
                      userName !== currentUser && e('button', {
                        onClick: (event) => {
                          event.stopPropagation();
                          deleteUser(userName);
                        },
                        className: "delete-user"
                      }, "Ã—")
                    )
                  )
                ),
                e('div', { className: "user-form", style: { marginTop: '16px' } },
                  e('input', {
                    type: "text",
                    placeholder: "Create new profile",
                    value: newUserName,
                    onChange: (event) => setNewUserName(event.target.value),
                    onKeyPress: (event) => event.key === 'Enter' && createUser(),
                    style: { flex: 1 }
                  }),
                  e('button', {
                    onClick: createUser,
                    className: "btn btn-primary",
                    disabled: !newUserName.trim() || users[newUserName.trim()]
                  }, "Create")
                ),
                users[newUserName.trim()] && e('p', { className: "text-red-600 text-xs mt-1" }, "Profile name already exists")
              )
            ),

            e('h2', { className: "text-3xl font-bold text-gray-800 mb-8 text-center" },
              e('span', { className: "icon" }, "ðŸŽ¯"),
              "Smart Task Prioritizer"
            ),

            // Quick Time Input
            e('div', { className: "card" },
              e('h2', { className: "card-title" },
                e('span', { className: "icon" }, "â°"),
                "I have some free time!"
              ),
              e('div', { className: "input-group" },
                e('input', {
                  type: "number",
                  placeholder: "Minutes available",
                  value: availableTime,
                  onChange: (event) => setAvailableTime(event.target.value),
                  style: { width: '200px' }
                }),
                e('span', { className: "text-gray-600" }, "minutes"),
                availableTime && e('button', {
                  onClick: () => setAvailableTime(''),
                  className: "btn-link"
                }, "Clear")
              )
            ),

            // Task Suggestions
            suggestions.length > 0 && e('div', { className: "card" },
              e('h3', { className: "card-title text-green-700" },
                e('span', { className: "icon" }, "âš¡"),
                `Perfect tasks for ${availableTime} minutes:`
              ),
              e('div', { className: "space-y-3" },
                suggestions.map(task => 
                  e('div', { key: task.id, className: "suggestion-card" },
                    e('div', { className: "flex justify-between items-start" },
                      e('div', {},
                        e('h4', { className: "font-semibold text-gray-800" }, task.name),
                        e('p', { className: "text-sm text-gray-600" }, task.description),
                        e('div', { className: "flex flex-wrap gap-4 text-xs text-gray-500 mt-2" },
                          e('span', {}, formatDeadline(task.deadline)),
                          e('span', {}, `Difficulty: ${task.difficulty}/5`),
                          e('span', { 
                            className: task.priorityType === 'must' ? 'text-red-600 font-semibold' : '' 
                          }, task.priorityType === 'must' ? 'MUST DO' : 'Want to do'),
                          task.taskType === 'breakable' && task.timeSpent > 0 && e('span', {
                            className: "text-indigo-600"
                          }, `${task.timeSpent}/${task.timeRequired} mins done`)
                        )
                      ),
                      e('div', { className: "text-right" },
                        e('div', { className: "text-lg font-bold text-green-700" },
                          `Score: ${task.score}`
                        ),
                        e('button', {
                          onClick: () => {
                            if (task.taskType === 'atomic') {
                              markTaskComplete(task.id);
                            } else {
                              const timeToWork = Math.min(parseInt(availableTime), task.timeRequired - task.timeSpent);
                              workOnTask(task.id, timeToWork);
                            }
                          },
                          className: "btn btn-success btn-small mt-2"
                        }, task.taskType === 'atomic' ? 'Complete' : 'Work on it')
                      )
                    )
                  )
                )
              )
            ),

            // Add Task Button
            e('div', { className: "flex justify-between items-center mb-4" },
              e('h2', { className: "text-2xl font-semibold text-gray-800" }, "All Tasks"),
              e('button', {
                onClick: () => setShowAddTask(!showAddTask),
                className: "btn btn-primary"
              },
                e('span', { className: "icon" }, "âž•"),
                "Add Task"
              )
            ),

            // Add Task Form
            showAddTask && e('div', { className: "card" },
              e('h3', { className: "card-title" }, "Add New Task"),
              e('div', { className: "grid grid-2" },
                e('div', {},
                  e('label', {}, "Task Name"),
                  e('input', {
                    type: "text",
                    value: newTask.name,
                    onChange: (event) => setNewTask({...newTask, name: event.target.value}),
                    className: "input-full",
                    placeholder: "Enter task name"
                  })
                ),
                e('div', {},
                  e('label', {}, "Time Required (minutes)"),
                  e('input', {
                    type: "number",
                    value: newTask.timeRequired,
                    onChange: (event) => setNewTask({...newTask, timeRequired: event.target.value}),
                    className: "input-full"
                  })
                ),
                e('div', { className: "col-span-2" },
                  e('label', {}, "Description"),
                  e('textarea', {
                    value: newTask.description,
                    onChange: (event) => setNewTask({...newTask, description: event.target.value}),
                    className: "input-full",
                    rows: "2"
                  })
                ),
                e('div', {},
                  e('label', {}, "Difficulty (1-5)"),
                  e('select', {
                    value: newTask.difficulty,
                    onChange: (event) => setNewTask({...newTask, difficulty: parseInt(event.target.value)}),
                    className: "input-full"
                  },
                    [1,2,3,4,5].map(n => e('option', { key: n, value: n }, n))
                  )
                ),
                e('div', {},
                  e('label', {}, "Deadline"),
                  e('input', {
                    type: "date",
                    value: newTask.deadline,
                    onChange: (event) => setNewTask({...newTask, deadline: event.target.value}),
                    className: "input-full"
                  })
                ),
                e('div', {},
                  e('label', {}, "Priority Type"),
                  e('select', {
                    value: newTask.priorityType,
                    onChange: (event) => setNewTask({...newTask, priorityType: event.target.value}),
                    className: "input-full"
                  },
                    e('option', { value: "want" }, "Want to do"),
                    e('option', { value: "must" }, "Must do")
                  )
                ),
                e('div', {},
                  e('label', {}, "Task Type"),
                  e('select', {
                    value: newTask.taskType,
                    onChange: (event) => setNewTask({...newTask, taskType: event.target.value}),
                    className: "input-full"
                  },
                    e('option', { value: "atomic" }, "Atomic (do in one go)"),
                    e('option', { value: "breakable" }, "Breakable (can split up)")
                  )
                ),
                newTask.taskType === 'breakable' && e('div', {},
                  e('label', {}, "Min chunk size (minutes)"),
                  e('input', {
                    type: "number",
                    value: newTask.minChunkSize,
                    onChange: (event) => setNewTask({...newTask, minChunkSize: event.target.value}),
                    className: "input-full"
                  })
                )
              ),
              e('div', { className: "flex gap-2 mt-4" },
                e('button', {
                  onClick: addTask,
                  className: "btn btn-primary"
                }, "Add Task"),
                e('button', {
                  onClick: () => setShowAddTask(false),
                  className: "btn btn-secondary"
                }, "Cancel")
              )
            ),

            // Task List
            e('div', { className: "space-y-4" },
              tasks.map(task => 
                e('div', { 
                  key: task.id, 
                  className: `task-card ${task.completed ? 'opacity-60' : ''}` 
                },
                  e('div', { className: "flex justify-between items-start" },
                    e('div', { className: "flex-1" },
                      e('div', { className: "flex items-center gap-2 mb-2" },
                        e('h3', { 
                          className: `text-lg font-semibold ${task.completed ? 'line-through text-gray-500' : 'text-gray-800'}` 
                        }, task.name),
                        task.completed && e('span', { className: "text-green-500" }, "âœ…")
                      ),
                      task.description && e('p', { className: "text-gray-600 mb-2" }, task.description),
                      e('div', { className: "flex flex-wrap gap-4 text-sm mb-2" },
                        e('span', { className: "flex items-center" },
                          e('span', { className: "icon" }, "â°"),
                          task.taskType === 'breakable' ? 
                            `${task.timeSpent}/${task.timeRequired} mins` : 
                            `${task.timeRequired} mins`
                        ),
                        e('span', { className: "flex items-center" },
                          e('span', { className: "icon" }, "ðŸ“…"),
                          formatDeadline(task.deadline)
                        ),
                        e('span', {}, `Difficulty: ${task.difficulty}/5`)
                      ),
                      e('div', { className: "flex flex-wrap gap-2" },
                        e('span', { 
                          className: `tag ${task.priorityType === 'must' ? 'tag-must' : 'tag-want'}` 
                        }, task.priorityType === 'must' ? 'MUST DO' : 'Want to do'),
                        e('span', { 
                          className: `tag ${task.taskType === 'atomic' ? 'tag-atomic' : 'tag-breakable'}` 
                        }, task.taskType === 'atomic' ? 'Atomic' : 'Breakable')
                      ),
                      task.taskType === 'breakable' && task.timeSpent > 0 && !task.completed && e('div', { className: "mt-3" },
                        e('div', { className: "progress-bar" },
                          e('div', { 
                            className: "progress-fill", 
                            style: {width: `${(task.timeSpent / task.timeRequired) * 100}%`}
                          })
                        ),
                        e('p', { className: "text-xs text-gray-500 mt-1" },
                          `${Math.round((task.timeSpent / task.timeRequired) * 100)}% complete`
                        )
                      )
                    ),
                    e('div', { className: "text-right ml-4" },
                      e('div', { className: "text-xl font-bold text-indigo-600 mb-2" },
                        `Score: ${calculateScore(task)}`
                      ),
                      !task.completed && e('button', {
                        onClick: () => markTaskComplete(task.id),
                        className: "btn btn-success btn-small"
                      }, "Mark Complete")
                    )
                  )
                )
              )
            ),

            tasks.length === 0 && e('div', { className: "empty-state" },
              e('div', { className: "empty-icon" }, "ðŸŽ¯"),
              e('p', { className: "text-gray-500 text-lg" }, "No tasks yet. Add your first task to get started!")
            )
          );
        };

        ReactDOM.render(e(SmartTaskPrioritizer), document.getElementById('root'));
    </script>
</body>
</html>
